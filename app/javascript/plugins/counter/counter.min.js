ArticleEditor,ArticleEditor.add("plugin","counter",{translations:{en:{counter:{words:"words",chars:"chars"}}},subscribe:{"editor.content.change":function(){this._count()}},init:function(){this.utils=this.app.create("utils")},start:function(){this._count()},_count:function(){var t=0,r=0,s=0,a=this.app.$element.val();if(""!==(a=this._clean(a))){var e=a.split(/\s+/),c=a.match(/\s/g);t=e?e.length:0,s=c?c.length:0,r=a.replace(/\s+/g," ").length}var i={words:t,characters:r,spaces:s};this.app.broadcast("counter.count",i),this.app.statusbar.add("words",this.lang.get("counter.words")+": "+i.words),this.app.statusbar.add("chars",this.lang.get("counter.chars")+": "+i.characters)},_clean:function(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/<\/(.*?)>/gi," ")).replace(/<(.*?)>/gi,"")).replace(/\t/gi,"")).replace(/\n/gi," ")).replace(/\r/gi," ")).replace(/&nbsp;/g,"1")).trim(),t=this.utils.removeInvisibleChars(t)}});